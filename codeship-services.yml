generate_commit_file:
  # This is a weird service we use to create the commit.py file.  See codeship-steps for the other half
  image: alpine/git
  entrypoint: sh
  volumes:
    - .:/repository
amara:
  build:
    image: 241878618260.dkr.ecr.us-west-2.amazonaws.com/amara
    dockerfile: Dockerfile
  cached: true
deploy:
  image: 241878618260.dkr.ecr.us-west-2.amazonaws.com/deploy
  encrypted_env_file: aws_creds.encrypted
  dockercfg_service: aws_generator
aws_generator: 
  image: codeship/aws-ecr-dockercfg-generator
  encrypted_env_file: aws_creds.encrypted
  add_docker: true
  environment:
    AWS_REGION: us-west-2
