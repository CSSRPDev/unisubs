{% load i18n forms %}
<div class="modal-dialog" role="document">
  <div class="modal-content">
    <header class="dialogHeader">
      <h4 class="dialogTitle">{% trans 'Invite members to ' %}{{ team.name }}</h4>
    </header>
    <ul class="nav nav-tabs">
      <li {% if modal_tab == 'username' %}class="active"{%endif%}>
        <a href="#username" data-toggle="tab">Invite by username</a>
      </li>
      {% if show_email_invite_link %}
      <li {% if modal_tab == 'email' %}class="active"{%endif%}>
        <a href="#email" data-toggle="tab">Invite by email</a>
      </li>
      {% endif %}
      {% if show_add_link %}
      <li>
        <a href="#add" data-toggle="tab">Add members</a>
      </li>
      {% endif %}
    </ul>

    <div class="tab-content">

      <div id="username" class="tab-pane
        {% if modal_tab == 'username' %}active{%endif%}">
        <form class="ajaxForm" method="post" action="{% url 'teams:invite' team.slug %}" class="team-invite">
          {% csrf_token %}
          {% include "future/forms/non-field-errors-context-errors.html" with errors=username_tab_non_field_errors %}
          {{ form.usernames|render_field_reverse_required }}
          {{ form.role|render_field }}
          {{ form.message|render_field }}
          <input type="hidden" value="username" name="modalTab"/>
          <div class="text-right">
            <button class="button borderless" data-dismiss="modal">{% trans "Cancel" %}</button>
            <button type="submit" class="button cta"> {% trans 'Invite' %}</button>
          </div>
        </form>
      </div>

      {% if show_email_invite_link %}
      <div id="email" class="tab-pane
        {% if modal_tab == 'email' %}active{%endif%}">
        <form class="ajaxForm" method="post" action="{% url 'teams:invite' team.slug %}" class="team-invite">
          {% csrf_token %}
          {% include "future/forms/non-field-errors-context-errors.html" with errors=email_tab_non_field_errors %}
          {{ form.email|render_field_reverse_required }}
          {{ form.role|render_field }}
          {{ form.message|render_field }}
          <input type="hidden" value="email" name="modalTab"/>
          <div class="text-right">
            <button class="button borderless" data-dismiss="modal">{% trans "Cancel" %}</button>
            <button type="submit" class="button cta"> {% trans 'Invite' %}</button>
          </div>
        </form>
      </div>
      {% endif %}

      {% if show_add_link %}
      <div id="add" class="tab-pane
        {% if modal_tab == 'add' %}active{%endif%}">
        <form class="ajaxForm" method="post" action="{% url 'teams:add-members' team.slug %}" class="team-invite">
          {% csrf_token %}
          {{ form_add_member.members|render_field }}
          {{ form_add_member.role|render_field }}                    
          <input type="hidden" value="add" name="modalTab"/>
          <div class="text-right">
            <button class="button borderless" data-dismiss="modal">{% trans "Cancel" %}</button>
            <button type="submit" class="button cta"> {% trans 'Add members' %}</button>
          </div>
        </form>
      </div>
      {% endif %}

    </div>
  </div>
</div>